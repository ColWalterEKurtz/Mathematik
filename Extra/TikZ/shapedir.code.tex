% parcolor version 2011-09-30
\begingroup
\ttfamily
\definecolor{R}{named}{Red}
\definecolor{G}{named}{ForestGreen}
\definecolor{B}{named}{RoyalBlue}
\definecolor{C}{named}{Cyan}
\definecolor{M}{named}{Magenta}
\definecolor{Y}{named}{YellowOrange}
\definecolor{background}{rgb}{0.82, 0.82, 0.92}
\dimen255=\textwidth
\advance\dimen255 by -2\fboxsep
\noindent
\colorbox{background}
{%
\parbox{\dimen255}
{%
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{0.0em}\textcolor{G}{\textbf{\%~{-}{-}{-}{-}{-}{-}{-}{-}}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{0.0em}\textcolor{G}{\textbf{\%~shapedir}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{0.0em}\textcolor{G}{\textbf{\%~{-}{-}{-}{-}{-}{-}{-}{-}}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{0.0em}\textcolor{G}{\textbf{\%}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{0.0em}\textcolor{G}{\textbf{\%~\textbackslash{}shapedir\{A\}\{B\}\{\textbackslash{}mydirection\}}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{0.0em}\textcolor{G}{\textbf{\%}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{0.0em}\textbackslash{}newcommand\{\textcolor{R}{\textbf{\textbackslash{}shapedir}}\}[3]\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{0.0em}\{\textcolor{G}{\textbf{\%}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{1.0em}\textcolor{G}{\textbf{\%~define~new~macro~if~missing}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{1.0em}\textbackslash{}ifthenelse\{\textbackslash{}isundefined\{\#3\}\}\{\textbackslash{}def\#3\{\textbackslash{}relax\}\}\{\textbackslash{}relax\}\textcolor{G}{\textbf{\%}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{1.0em}\textcolor{G}{\textbf{\%~get~x{-}coordinate~from~vector}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{1.0em}\textbackslash{}pgfextractx\{\textbackslash{}dimen0\}\{\textbackslash{}pgfpointdiff\{\textbackslash{}pgfpointanchor\{\#1\}\{center\}\}\textcolor{G}{\textbf{\%}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{18.5em}\{\textbackslash{}pgfpointanchor\{\#2\}\{center\}\}\}\textcolor{G}{\textbf{\%}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{1.0em}\textcolor{G}{\textbf{\%~get~y{-}coordinate~from~vector}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{1.0em}\textbackslash{}pgfextracty\{\textbackslash{}dimen1\}\{\textbackslash{}pgfpointdiff\{\textbackslash{}pgfpointanchor\{\#1\}\{center\}\}\textcolor{G}{\textbf{\%}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{18.5em}\{\textbackslash{}pgfpointanchor\{\#2\}\{center\}\}\}\textcolor{G}{\textbf{\%}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{1.0em}\textcolor{G}{\textbf{\%~arctangent~of~y/x~in~degrees}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{1.0em}\textcolor{G}{\textbf{\%~this~also~takes~into~account~the~quadrants}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{1.0em}\textbackslash{}pgfmathsetmacro\{\#3\}\{atan2(\textbackslash{}the\textbackslash{}dimen1,\textbackslash{}the\textbackslash{}dimen0)\}\textcolor{G}{\textbf{\%}}\\
\rule[-0.5ex]{0pt}{2.5ex}\hspace*{0.0em}\}}%
}%
\endgroup
